function initEvents(){$(window).bind("resize",function(){setDimensions()});$(".images a").bind("hover",function(){$(this).find(".colorImg").fadeTo("fast",1)});$(".images a").bind("mouseleave",function(){$(this).find(".colorImg").fadeTo("fast",0)});$("#menu ul li ul li a").bind("hover",function(){if(!$(this).hasClass("current"))$(this).animate({opacity:.8,top:-1,left:-1,width:12,height:12},100)});$("#menu ul li ul li a").bind("mouseleave",function(){if(!$(this).hasClass("current"))$(this).animate({opacity:.2,top:0,left:0,width:10,height:10},100);else $(this).animate({top:0,left:0,width:10,height:10},100)});$("#flecheG, #flecheD, #IDDroite, #PRDroite, #EDDroite, #WEDroite").bind("click",function(){navigTo($(this).attr("page"),$(this).attr("block"))});$(".page").each(function(){$(this).bind("click",function(){var e=$(this).attr("id");var t=e.split("_");navigTo(t[1],1)});$(this).css("cursor","pointer")});var e=navigator.userAgent.match(/iPad/i)!=null;if(jQuery.browser.mobile||e){document.addEventListener("touchmove",function(e){e.preventDefault()});$("#logo img").live("click",function(){if($("#options").css("left")=="10px"){$("#logo").css("width",380);$("#options").animate({left:160,width:186},600,function(){$("#optionsContent").fadeIn(400)})}else{$("#options").animate({left:10,width:0},600,function(){$("#optionsContent").fadeOut(400);$("#logo").css("width",160)})}})}else{$("#logo img").bind("hover",function(){if($("#options").css("left")=="10px"){$("#logo").css("width",380);$("#options").animate({left:160,width:186},600,function(){$("#optionsContent").fadeIn(400)})}});$("#logo").bind("mouseleave",function(){$("#optionsContent").fadeOut(400,function(){$("#options").animate({left:10,width:0},600,function(){$("#logo").css("width",160)})})})}}function initMenu(){$("#menu ul li ul li a").bind("click",function(){var e=$(this).attr("page");var t=$(this).attr("block");navigTo(e,t)})}function setOpacity(){$(".page").each(function(){if($(this).hasClass("currentPage"))$(this).animate({opacity:"1"},0);else $(this).animate({opacity:"1"},0)})}function setDimensions(){var e=$(window).width();var t=$(window).height();var n=1600/650;pageHeight=650;$(".page, .floatBlock").css({width:e,height:pageHeight});$(".pageSlider").css({height:pageHeight,width:"1000px"});$(".pageSlider").each(function(){$(this).css({height:pageHeight,width:$(this).children().length*e})});$("#contactComplete").css("height",t-pageHeight);$(".pointerBottom").css("top",pageHeight/2+pageHeight/3);$(".pointerTop").css("bottom",pageHeight/2+pageHeight/3);$("#global-container").css("height",t);$("#global-slider").css("height",pageHeight*5);if(currentBlock!=1)$("#page_"+currentPage).scrollTo($("#page_"+currentPage+" #block_"+currentBlock),0,{axis:"x"})}function initScroll(){$(window).bind("mousewheel",function(e,t){if(!blockMove)detectScroll(t)});$(window).bind("swipeone",function(e,t){var n=Math.abs(t.delta[0].startX);var r=Math.abs(t.delta[0].startY);var i=t.direction.lastX;var s=t.direction.lastY;if(n>r){if(i>0){navigTo(currentPage,currentBlock-1)}else{navigTo(currentPage,currentBlock+1)}}else{if(s>0){navigTo(currentPage-1,1)}else{navigTo(currentPage+1,1)}}})}function detectScroll(e){var t=e>0?"Up":"Down";var n=Math.abs(e);var r=.1;var i=5;if(t=="Up"&&n>r&&n<i){navigTo(parseInt(currentPage)-1,1)}else if(t=="Down"&&n>r&&n<i){navigTo(parseInt(currentPage)+1,1)}}function setCurrentPage(e,t){$("#menu ul li .current").animate({opacity:.2,top:0,left:0,width:10,height:10},300,function(){$(this).removeClass("current")});$('#menu ul li a:[page="'+e+'"][block="'+t+'"]').animate({opacity:.8},200,function(){$(this).addClass("current")});$("div.currentPage").removeClass("currentPage");$("#page_"+e).addClass("currentPage");$("#page_"+e).unbind("click");$("#page_"+e).css("cursor","auto");if(e!=currentPage){$("#page_"+currentPage).bind("click",function(){var e=$(this).attr("id");var t=e.split("_");navigTo(t[1],1)});$("#page_"+currentPage).css("cursor","pointer")}setOpacity();setDarts(e,t);currentBlock=parseInt(t);currentPage=parseInt(e)}function navigTo(e,t){if(!blockMove&&$("#page_"+e+" #block_"+t).length>0&&(e!=currentPage||currentBlock!=t)){if(e!=currentPage)stopScroll();if(currentPage!=e){$("#flecheG").fadeOut("fast");$("#flecheD").fadeOut("fast");$("#IDDroite").fadeOut("fast");$("#PRDroite").fadeOut("fast");$("#EDDroite").fadeOut("fast");$("#WEDroite").fadeOut("fast")}$(".currentPage").animate({opacity:1},0,function(){$(this).removeClass("currentPage");if(e!=currentPage&&currentBlock!=1){$("#page_"+currentPage).scrollTo($("#page_"+currentPage+" #block_1"),1e3,{axis:"x",queue:true,onAfter:function(){$("#global-container").scrollTo("#page_"+e,500,{axis:"y",onAfter:function(){$("#page_"+e).scrollTo($("#page_"+e+" #block_"+t),1e3,{axis:"x",queue:true,onAfter:function(){startScroll();setCurrentPage(e,t)}})}})}})}else if(e!=currentPage||t!=currentBlock){$("#global-container").scrollTo("#page_"+e,800,{axis:"y",onAfter:function(){if(currentBlock==t){setTimeout("startScroll();",400);setCurrentPage(e,t)}if(t!=currentBlock){$("#page_"+e).scrollTo($("#page_"+e+" #block_"+t),500,{axis:"x",queue:true,onAfter:function(){startScroll();setCurrentPage(e,t)}})}}})}});jQuery.data(document.body,"page",e);jQuery.data(document.body,"block",t);$("#languages a").each(function(){var e=jQuery.data(document.body,"page");var t=jQuery.data(document.body,"block");var n=$(this).attr("rel");var r="http://www.hear-palmer.com/"+n+"/"+e+"/"+t;$(this).attr("href",r)})}}function setDarts(e,t){if(t==1){$("#flecheG").fadeOut("fast")}else $("#flecheG").fadeIn("fast");if($("#page_"+e).find(".floatBlock").length==1||$("#page_"+e).find(".floatBlock").length==t){$("#flecheD").fadeOut("fast")}else{$("#flecheD").fadeIn("fast")}$("#flecheG").attr("page",e).attr("block",parseInt(t,10)-1);$("#flecheD").attr("page",e).attr("block",parseInt(t,10)+1);$("#IDDroite").attr("page",e).attr("block",parseInt(t,10)+1);$("#PRDroite").attr("page",e).attr("block",parseInt(t,10)+1);$("#EDDroite").attr("page",e).attr("block",parseInt(t,10)+1);$("#WEDroite").attr("page",e).attr("block",parseInt(t,10)+1)}function stopScroll(){blockMove=true}function startScroll(){blockMove=false}var pageHeight=650;var currentPage=0;var currentBlock=1;var blockMove=false;var myScroll;$(function(){setDimensions();var e=$("#start_page").val();var t=$("#start_block").val();$("#page_"+e).addClass("currentPage");navigTo(e,t);initEvents();initMenu();initScroll()})